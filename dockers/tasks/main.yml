---
# tasks file for dockers
- name: Job 01 | Copy default docker files to "{{ansible_hostname}}"
  copy:
    src: "files/docker"
    dest: "/opt/"
    owner: ibrahim
    group: ibrahim
    mode: 0744
  when: ansible_os_family == 'Debian' and dkr_copy_def_files # ansible_hostname != 'virthost01' or ansible_hostname != '4a999ff' 

- name: Job 02 | Copy extended docker files to target host
  copy:
    src: "files/a35a0d3/docker"
    dest: "/opt/"
    owner: ibrahim
    group: ibrahim
    mode: 0744
  when: ansible_os_family == 'Debian' and dkr_copy_etx_files # ansible_hostname == 'a35a0d3'

- name: Job 03 | Copy Specific docker folder(s) to target host
  copy:
    src: "files/{{item.fldr}}/docker"
    dest: "/opt/"
    owner: ibrahim
    group: ibrahim
    mode: 0744
  with_items:
    "{{ dckr_fldr_lst }}"
  when: dckr_fldr_lst.0 is defined
#
#TODO: find a way to imporve the copy
- name: Job 04 | Copy docker folder(s) to target host that matches "ansible_hostname"
  copy:
    src: "files/{{ansible_hostname}}/docker"
    dest: "/opt/"
    owner: ibrahim
    group: ibrahim
    mode: 0744
  #when: ansible_hostname != 'virthost01'
#
- name: Job 08 | import task watchtower
  ansible.builtin.import_tasks:
    file: 0000-watchtower.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 09 | import task dozzle
  ansible.builtin.import_tasks:
    file: 8892-dozzle.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 10 | import task iSpy
  ansible.builtin.import_tasks:
    file: 8099-iSpy.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 11 | import task semaphore
  ansible.builtin.import_tasks:
    file: 3002-semaphore.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 12 | import task semaphore
  ansible.builtin.import_tasks:
    file: 8081-nginx_proxy_manager.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 13 | import task truecommand
  ansible.builtin.import_tasks:
    file: 3006-truecommand.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 14 | import task pihole
  ansible.builtin.import_tasks:
    file: 8080-pihole.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 15 | import task gravity
  ansible.builtin.import_tasks:
    file: 8008-gravity.yml
  #when: apt_host_pckg_lst | contains bind9
#
- name: Job 16 | import task homepage
  ansible.builtin.import_tasks:
    file: 3550-homepage.yml
  #when: apt_host_pckg_lst | contains bind9
#
#
#
# keep this last
- name: Job 99 | import task prune
  ansible.builtin.import_tasks:
    file: prune.yml
  when: instl_docker_pckg
  tags:
    - #test
#
# command: touch "{{ item.item }}"
#   with_items:
#       - { item: "1" }
#       - { item: "2" }
#       - { item: "3" }
